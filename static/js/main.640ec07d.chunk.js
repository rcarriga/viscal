(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(26),c=n.n(i),o=(n(85),n(86),n(87),function(e){return a.a.createElement("div",{className:"hero"},a.a.createElement("div",{className:"hero-body"},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"title is-1 is-family-sans-serif"},"\ud835\udf7a Viscal"),a.a.createElement("div",{className:"subtitle"},"A visual language to interpret the Lambda Calculus"))),e.children)}),u=(n(88),n(33)),s=n(8),l=n(60),d=n.n(l),f=n(18),m=n(11),h=n(3),b=n(5),v=n(2),p=n(4),g=n.n(p),O=function(){return"_"+(Number(String(Math.random()).slice(5))+Date.now()+Math.round(performance.now())).toString(36)},j=function(e,t){var n=t.nodes[e];if(n&&"APPLICATION"===n.type){var r=n.left,a=n.right;if(r&&a&&t.nodes[r]&&t.nodes[a]){var i=y(r,t);if(i){var c=Object(v.visibleChildren)(r,t.nodes)[0],o=A(r,a,t);return{type:v.REDUCTION_STAGES[0],visibleParent:i,parentApplication:e,abs:r,child:c,consumed:a,substitutions:o,reducer:t.reducer||""}}}}},E=function(e,t){return!("APPLICATION"!==e.type||!e.left||!e.right||!t[e.left]||!t[e.right]||"ABSTRACTION"!==t[e.left].type)},y=function(e,t){return Object(v.searchTree)(t.nodes,(function(n,r){return-1!==Object(v.visibleChildren)(r,t.nodes).indexOf(e)}),t.root||"")},A=function(e,t,n){return T(e,n).map((function(e,r){return-1===r?{}:Object(b.a)({},e,{nodes:N(t,n.nodes),primitives:S(t,n.nodes)})})).reduce((function(e,t){return Object(h.a)({},e,{},t)}),{})},S=function(e,t){return g.a.uniq(Object(v.reduceTree)(t,(function(e,t){return[].concat(Object(m.a)(e),Object(m.a)(t.primitives))}),[],e)).reduce((function(e,t){return Object(h.a)({},e,Object(b.a)({},t,O()))}),{})},N=function e(t,n){var r=n[t];return r?Object(v.directChildren)(r).map((function(t){return e(t,n)})).reduce((function(e,t){return Object(h.a)({},e,{},t)}),Object(b.a)({},t,O())):{}},T=function(e,t){return g.a.keys(g.a.pickBy(t.nodes,(function(t){return"VARIABLE"===t.type&&t.binder===e})))},R={normal:{name:"Normal Order",description:"Performs normal order reduction...",useReduction:function(e){return function e(t,n){if(n){var r=t.nodes[n];if(!r)return;if(E(r,t.nodes))return j(n,t);switch(r.type){case"ABSTRACTION":return e(t,r.child);case"APPLICATION":var a=[r.left,r.right],i=a[1];return e(t,a[0])||e(t,i)}}}(e,e.root)}},applicative:{name:"Applicative Order",description:"Performs applicative order reduction.",useReduction:function(e){return function e(t,n){if(n){var r=t.nodes[n];if(!r)return;var a=function(){switch(r.type){case"ABSTRACTION":return e(t,r.child);case"APPLICATION":var n=[r.left,r.right],a=n[1];return e(t,n[0])||e(t,a)}}();if(a)return a;if(E(r,t.nodes))return j(n,t)}}(e,e.root)}}},x=n(10),I=n.n(x),C=function(e,t,n){var r=function(e){return I.a.optWhitespace.then(e).skip(I.a.optWhitespace)},a=r(I.a.regexp(/[a-z]+/)),i=r(I.a.regexp(/[A-Z]+/)),c=function(){return o().atLeast(1).map((function(e){return e.slice(1).reduce((function(e,t){return{type:"APPL",left:e,right:t}}),e[0])}))},o=function(){return r(I.a.alt((e=I.a.lazy(c),I.a.string("(").then(r(e)).skip(I.a.string(")"))),I.a.lazy(s),I.a.lazy(u),I.a.lazy(l)));var e},u=function(){return a.map((function(e){return{type:"VAR",varName:e}}))},s=function(){return I.a.string("\\").or(I.a.string("\u03bb")).then(I.a.seqMap(a.atLeast(1),I.a.string("."),I.a.lazy(c),(function(e,t,n){var r=function(e,t){return{type:"ABS",varName:t,child:e}};return e.slice(0,e.length-1).reverse().reduce(r,r(n,e[e.length-1]))})))},l=function(){return r(i.map((function(e){return{name:e,exprStr:n[e]}})).or(I.a.regexp(/[0-9]+/).map((function(e){for(var t=Number(e),n="x",r=0;r<t;r++)n="f (".concat(n,")");return{name:e,exprStr:"\u03bb f x. ".concat(n)}})))).map((function(e){var t=c().parse(e.exprStr);return t.status?{type:"CONST",name:e.name,expr:t.value}:I.a.makeFailure(t.index.offset,t.expected)}))},d=c().parse(e);if(!d.status)return d;var f=d.value;if(f){var p=function(e){return g.a.mapValues(e,(function(e){return e+1}))},j=O(),E=function e(n,r,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!n)return c;switch(n.type){case"CONST":var o=O();return e(n.expr,r,a,i,Object(h.a)({},c,Object(b.a)({},o,{rootID:a,name:n.name})));case"VAR":return t(Object(v.addVariable)({nodeID:a,binder:i[r[n.varName]],name:n.varName})),c;case"ABS":var u=O();return t(Object(v.addAbstraction)({nodeID:a,variableName:n.varName,child:u})),e(n.child,Object(h.a)({},p(r),Object(b.a)({},n.varName,0)),u,[a].concat(Object(m.a)(i)),c);case"APPL":var s=O(),l=O();t(Object(v.addApplication)({nodeID:a,left:s,right:l}));var d=e(n.left,r,s,i,c);return e(n.right,r,l,i,d);default:return c}}(f,{},j);g.a.forEach(E,(function(e,n){return t(Object(v.createPrimitive)({name:e.name,primID:n,rootID:e.rootID}))})),t(Object(v.setOriginalRoot)(j))}},w=n(30),k=n(64),P=function(){var e=D(),t=M(),n=L(t),r=n.start,i=n.rest,c=B();return a.a.createElement(k.default,{events:c,orderedKeys:e,onRest:i,onStart:r})},M=function(){var e=Object(v.useDispatch)(),t=Object(v.useTreeState)(),n=Object(v.useReduction)(),a=R[Object(v.useReducer)()||""]||{useReduction:function(){}},i=function(){return a.useReduction(t)},c=Object(v.useMode)(),o=function(){switch(c){case"PLAY":if(n)e(Object(v.nextReductionStage)());else{var t=i();e(t?Object(v.queueReduction)(t):Object(v.setMode)("STOP"))}break;case"FORWARD":n?(e(Object(v.nextReductionStage)()),n.type===v.REDUCTION_STAGES[v.REDUCTION_STAGES.length-1]&&e(Object(v.setMode)("STOP"))):e(Object(v.queueReduction)(i()));break;case"REVERSE":e(w.ActionCreators.undo()),n&&n.type===v.REDUCTION_STAGES[0]&&e(Object(v.setMode)("STOP"))}};return Object(r.useEffect)(o,[c]),o},L=function(e){var t=Object(r.useRef)(new Set([])),n=Object(r.useState)(!1),a=Object(s.a)(n,2),i=a[0],c=a[1];return{start:function(e){t.current.add(e),i||c(!0)},rest:function(n){t.current.delete(n),0===t.current.size&&(e(),c(!1))}}},D=function(){var e=Object(v.useCoords)(),t=Object(v.useHighlighted)(),n=Object(v.useSelected)(),r=Object(v.useReduction)();return Object.keys(e).sort((function(a,i){var c=e[a].nodeID;return t.includes(c)||n.includes(c)?1:!r||c!==r.consumed&&-1===Object.values(r.substitutions).map((function(e){return e.nodes[r.consumed]})).indexOf(c)?e[a].x-e[i].x||e[i].w-e[a].w:1}))},B=function(){var e=Object(v.useDispatch)(),t=Object(r.useState)({onClick:function(t){e(Object(v.setSelected)([t]))},onMouseOver:function(t){e(Object(v.setHighlighted)([t]))},onMouseLeave:function(){e(Object(v.setHighlighted)([]))}});return Object(s.a)(t,1)[0]},V=n(15),U=function(e){var t=e.node;e.nodeID;return a.a.createElement("div",{className:""},a.a.createElement(W,{name:"Variable"}),a.a.createElement(F,{name:"Name",value:t.name}))},H=function(e){var t=e.node,n=e.text;e.nodeID;return a.a.createElement("div",{className:""},a.a.createElement(W,{name:"Abstraction"}),a.a.createElement(F,{name:"Scoped Variable",value:t.variableName}),a.a.createElement(F,{name:"Text",value:n}))},_=function(e){var t=e.text;e.nodeID;return a.a.createElement("div",{className:""},a.a.createElement(W,{name:"Application"}),a.a.createElement(F,{name:"Text",value:t}))},F=function(e){var t=e.name,n=e.value;return void 0!==n?a.a.createElement("div",{className:""},a.a.createElement("div",{style:{display:"flex"}},a.a.createElement("strong",{style:{marginRight:10}},t,":"),a.a.createElement("div",{className:""},n))):null},W=function(e){var t=e.name;return a.a.createElement("div",{className:"subtitle"},t,a.a.createElement("div",{className:"dropdown-divider"}))},q=function(e){var t=e.node,n=Object(v.useDispatch)(),r=t.primitives[t.primitives.length-1];return Object(v.usePrimitives)()[r]?a.a.createElement("div",{className:"column"},a.a.createElement("div",{className:"button",onClick:function(){return n(Object(v.destructurePrimitive)(r))}},"Destructure Primitive")):null},G=function(e){var t=e.nodeID,n=Object(v.useDispatch)();return Object(v.useRoot)()!==t?a.a.createElement("div",{className:"column"},a.a.createElement("div",{className:"button",onClick:function(){n(Object(v.setSelected)([])),n(Object(v.setRoot)(t))}},"Focus")):null},Y=function(){var e=Object(v.useDispatch)(),t=Object(v.useSelected)(),n=Object(v.useHighlighted)(),r=1===t.length?t[0]:n[0]||"",i=Object(v.useTextTree)(r),c=Object(v.useCoord)(r),o=Object(v.useTree)()[r],u=Object(V.c)({opacity:r&&c?1:0,config:V.b.gentle,cursor:"default"}),s=Object(V.c)({float:"right",opacity:t.length?1:0}),l=c?400:0,d=c?300:0;return a.a.createElement(V.a.foreignObject,{style:u,x:c?c.x+c.w/2-l/2:0,y:c?c.y+100:0,height:d,width:l},a.a.createElement("div",{className:"card",style:{border:"3px solid grey",borderRadius:3}},a.a.createElement("div",{className:"card-content"},a.a.createElement(V.a.button,{className:"delete",onClick:function(){return e(Object(v.setSelected)([]))},style:s}),r&&o?a.a.createElement("div",null,function(){switch(o.type){case"VARIABLE":return a.a.createElement(U,{nodeID:r,node:o});case"ABSTRACTION":return a.a.createElement(H,{nodeID:r,node:o,text:i});case"APPLICATION":return a.a.createElement(_,{nodeID:r,text:i})}}(),a.a.createElement("div",{className:"dropdown-divider"}),a.a.createElement("div",{className:"columns"},a.a.createElement(q,{node:o}),a.a.createElement(G,{nodeID:r}))):null)))},z=function(){var e=Object(r.useRef)(null),t=d()(e),n=t.width,i=t.height,c=Object(r.useState)(0),o=Object(s.a)(c,2),u=o[0],l=o[1],m=Object(r.useState)(0),h=Object(s.a)(m,2),b=h[0],v=h[1],p=Object(r.useState)(!1),g=Object(s.a)(p,2),O=g[0],j=g[1];return a.a.createElement("div",{ref:e,className:"has-background-light",style:{width:"100%",height:"100%"}},a.a.createElement(f.b.svg,{id:"board-content",pointerEvents:"all",className:"",viewBox:"".concat(u-n/10," ").concat(b-i/2," ").concat(n," ").concat(i),style:{width:"100%",height:"100%",cursor:O?"move":"pointer"},onPanStart:function(){return j(!0)},onPanEnd:function(){return j(!1)},onPan:function(e,t){l(u-t.delta.x),v(b-t.delta.y)}},a.a.createElement("filter",{id:"goo"},a.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blur"}),a.a.createElement("feColorMatrix",{in:"blur",type:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"}),a.a.createElement("feComposite",{in:"SourceGraphic",in2:"goo",operator:"atop"})),a.a.createElement(P,null),a.a.createElement(Y,null)))},X=n(41),K=n.n(X),Z=n(123),J=function(e){return a.a.createElement($,null,e.title?a.a.createElement(Q,null,e.title):null,a.a.createElement(Z.a,{onChange:function(t,n){return e.onChange("number"===typeof n?n:n[0])},value:e.value,max:e.max,min:e.min}))},Q=function(e){return a.a.createElement("div",{className:"has-text-dark"},e.children)},$=function(e){return a.a.createElement("div",{className:"container"},e.children)},ee=function(){var e=Object(v.useAnimationSettings)(),t=Object(v.useDispatch)();return a.a.createElement("div",null,a.a.createElement("div",{className:"menu-label"},"Speed"),a.a.createElement(J,{onChange:function(e){return t(Object(v.setAnimationSetting)({setting:"duration",value:(100-e)/100}))},min:1,max:100,value:100-100*(e.duration||.5)}))},te=function(e){var t=function(){u(""),e.onClose()},n=Object(v.useDispatch)(),i=Object(r.useState)(""),c=Object(s.a)(i,2),o=c[0],u=c[1];return a.a.createElement("div",{className:"modal ".concat(e.show&&"is-active")},a.a.createElement("div",{className:"modal-background",onClick:t}),a.a.createElement("div",{className:"modal-content"},a.a.createElement("div",{className:"box"},a.a.createElement("div",{className:"card-content"},a.a.createElement("input",{onChange:function(e){return u(e.currentTarget.value)},value:o,className:"input is-medium",style:{marginBottom:10},type:"text",placeholder:"Enter a name for the primitive"}),a.a.createElement("button",{className:"button is-capitalized",onClick:function(){e.nodeID&&o&&(n(Object(v.createPrimitive)({name:o,primID:O(),rootID:e.nodeID})),n(Object(v.setSelected)([]))),t()}},"OK")))),a.a.createElement("button",{onClick:t,className:"modal-close is-large","aria-label":"close"}))},ne=function(){var e=Object(v.useSelected)(),t=1===e.length?e[0]:"",n=Object(r.useState)(!1),i=Object(s.a)(n,2),c=i[0],o=i[1];return a.a.createElement("div",null,a.a.createElement(te,{show:c,nodeID:t,onClose:function(){return o(!1)}}),a.a.createElement("div",{className:"menu-label"},"Primitives"),a.a.createElement("div",{className:"",style:{display:"flex",justifyContent:"center"}},a.a.createElement("button",{onClick:function(){return t&&o(!0)},className:"button ".concat(t?"has-text-info":"has-text-grey"," "),style:{width:"100%"}},t?"Create":"Select a Node")))},re=n(73),ae=n.n(re),ie=n(72),ce=n.n(ie),oe=function(){var e=Object(v.useConstants)(),t=Object(r.useState)(!1),n=Object(s.a)(t,2),i=n[0],c=n[1],o=Object(V.c)({overflow:"auto",maxHeight:i?300:0}),u=Object(V.c)({display:"inline-block",transform:i?"rotate(180deg)":"rotate(0deg)"});return a.a.createElement("div",null,a.a.createElement("div",{style:{display:"flex",cursor:"pointer"},onClick:function(){return c(!i)}},a.a.createElement("div",{style:{flexGrow:7},className:"subtitle is-5"},"Built-in Functions"),a.a.createElement("div",{style:{flexGrow:1}},a.a.createElement(V.a.div,{style:u},a.a.createElement(K.a,{fontSize:"large"})))),a.a.createElement(V.a.div,{className:"table-container",style:o},a.a.createElement("table",{className:"table is-fullwidth is-striped is-hoverable"},a.a.createElement("thead",{className:"thead"},a.a.createElement("tr",{className:"tr"},a.a.createElement("th",{className:"th"},"Name"),a.a.createElement("th",{className:"th"},"Text"))),a.a.createElement("tbody",{className:"tbody"},g.a.map(e,(function(e,t){return a.a.createElement("tr",{key:t,className:"tr"},a.a.createElement("td",{className:"td"},t),a.a.createElement("td",{className:"td"},e))}))))))},ue=function(e){var t=Object(v.useTextTree)(),n=Object(r.useState)(!1),i=Object(s.a)(n,2),c=i[0],o=i[1];return a.a.createElement("div",Object.assign({},e,{className:"tag is-light is-info is-".concat(e.medium?"medium":"large"," is-paddingless ").concat(e.className),style:Object(h.a)({width:"100%",overflow:c?"auto":"hidden"},e.style||{}),onMouseOver:function(){return o(!0)},onMouseLeave:function(){return o(!1)}}),a.a.createElement("div",{style:{textAlign:"center",width:"100%"}},t))},se=function(){return a.a.createElement("div",{style:{width:"100%",margin:10,paddingLeft:"20%",paddingRight:"20%"}},a.a.createElement("div",{className:"dropdown-divider"}))},le=function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),i=n[0],c=n[1],o={cursor:"pointer",position:"absolute"},u=Object(V.c)({overflowY:"auto",maxHeight:i?300:0,config:{clamp:!0}});return a.a.createElement("div",null,a.a.createElement("div",{style:{display:"flex"}},a.a.createElement("div",{className:"subtitle is-5"},"Input"),a.a.createElement("div",{style:{marginLeft:10}},i?a.a.createElement(V.a.div,{onClick:function(){return c(!i)},style:o},a.a.createElement(ae.a,null)):a.a.createElement(V.a.div,{onClick:function(){return c(!i)},style:o},a.a.createElement(ce.a,null)))),a.a.createElement(de,{style:u}),a.a.createElement("input",Object.assign({className:"input is-medium"},e,{type:"text",placeholder:"Enter a lambda expression"})))},de=function(e){return a.a.createElement(V.a.div,{className:"message is-info",style:e.style},a.a.createElement("div",{className:"message-header"},a.a.createElement("p",null,"Writing Expressions")),a.a.createElement("div",{className:"message-body"},'Expressions can be input as text. Examples of these can be seen in the built-in functions. Abstractions are         written with "\u03bb" which can be inputted as a backslash "\\", followed by a list of lower-case variable names separated by spaces and finally         terminated by ".". Numbers can be entered as digits. Built-ins are used by using the upper-case name.'))},fe=function(){var e=Object(v.useDispatch)(),t=Object(r.useState)(!1),n=Object(s.a)(t,2),i=n[0],c=n[1],o=Object(r.useState)("PLUS 1 2"),u=Object(s.a)(o,2),l=u[0],d=u[1],f=Object(r.useState)(l),m=Object(s.a)(f,2),h=m[0],b=m[1],p=function(){return c(!i)},g=Object(v.useConstants)(),O=Object(v.useOriginalRoot)(),j=Object(v.useRoot)();return Object(r.useEffect)((function(){e(Object(v.clearTree)()),C(l,e,g),e(w.ActionCreators.clearHistory())}),[g,e,l]),a.a.createElement("div",null,a.a.createElement("div",{className:"menu-label"},"Expression"),a.a.createElement("div",{style:{marginBottom:20}},a.a.createElement(ue,{medium:"true",onClick:function(){return c(!i)},style:{cursor:"pointer"}}),a.a.createElement("div",{className:"button has-text-".concat(O!==j?"link":"grey"),title:O!==j?"Reset focus":"Can't reset focus",style:{width:"100%",marginTop:10},onClick:function(){return e(Object(v.resetRoot)())}},O!==j?"Focused":"Full View")),a.a.createElement("div",null,a.a.createElement("div",{className:"modal ".concat(i?"is-active":"")},a.a.createElement("div",{className:"modal-background",onClick:p}),a.a.createElement("div",{className:"modal-content"},a.a.createElement("div",{className:"box is-background-light"},a.a.createElement("div",{className:"card-content"},a.a.createElement("div",{className:"container",style:{margin:20}},a.a.createElement(oe,null),a.a.createElement(se,null),a.a.createElement("div",{className:"subtitle is-5"},"Current Form"),a.a.createElement(ue,null),a.a.createElement(se,null),a.a.createElement(le,{value:h,onChange:function(e){return b(e.currentTarget.value.replace("\\","\u03bb"))}})),a.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},a.a.createElement("button",{className:"button has-text-light has-background-info",style:{marginRight:20},onClick:function(){p(),d(h)}},"CHANGE"))))),a.a.createElement("button",{className:"modal-close is-large",onClick:p,"aria-label":"close"}))))},me=n(122),he=n(77),be=n.n(he),ve=n(74),pe=n.n(ve),ge=n(75),Oe=n.n(ge),je=n(76),Ee=n.n(je),ye=function(){var e=Object(v.useReducer)(),t=e?R[e]:void 0,n=Object(v.useDispatch)(),i=Object(v.useMode)(),c=Object(r.useState)(!1),o=Object(s.a)(c,2),u=o[0],l=o[1];return a.a.createElement("div",null,a.a.createElement("div",{className:"menu-label"},"Reduction"),a.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:"10px"}},a.a.createElement(me.a,{onClick:function(){return n(Object(v.setMode)("REVERSE"))}},a.a.createElement(pe.a,null)),"STOP"!==i?a.a.createElement(me.a,{onClick:function(){return n(Object(v.setMode)("STOP"))}},a.a.createElement(Oe.a,null)):a.a.createElement(me.a,{onClick:function(){return n(Object(v.setMode)("PLAY"))}},a.a.createElement(Ee.a,null)),a.a.createElement(me.a,{onClick:function(){return n(Object(v.setMode)("FORWARD"))}},a.a.createElement(be.a,null))),a.a.createElement("div",null,a.a.createElement("div",{className:"dropdown ".concat(u&&"is-active"),style:{width:"100%"}},a.a.createElement("div",{className:"dropdown-trigger",style:{width:"100%"}},a.a.createElement("button",{onMouseOver:function(){return l(!0)},onMouseLeave:function(){return l(!1)},style:{width:"100%"},className:"button ".concat(t?"has-text-info":"has-text-grey")},t?t.name:"No Method")),a.a.createElement("div",{onMouseOver:function(){return l(!0)},onMouseLeave:function(){return l(!1)},className:"dropdown-menu"},a.a.createElement("div",{className:"dropdown-content"},g.a.map(R,(function(e,t){return a.a.createElement("a",{key:e.name,style:{height:"100%",width:"100%"},className:"dropdown-item has-text-grey",onClick:function(){l(!1),n(Object(v.setReducer)(t))}},e.name)})))))))},Ae=function(){var e=Object(v.useDimensions)(),t=Object(v.useDispatch)(),n=Object(r.useState)(10),i=Object(s.a)(n,2),c=i[0],o=i[1];return a.a.createElement("div",null,a.a.createElement("div",{className:"menu-label"},"Scale"),a.a.createElement(J,{onChange:function(n){t(Object(v.updateDimensions)(g.a.mapValues(e,(function(e,t){return"strokeWidth"!==t?Math.round(e*n/c):e})))),o(n)},min:1,max:20,value:c}))},Se=function(){var e=Object(r.useState)(!0),t=Object(s.a)(e,2),n=t[0],i=t[1],c=Object(r.useState)(null),o=Object(s.a)(c,2),u=o[0],l=o[1];return a.a.createElement("div",{className:"box",style:{width:250}},a.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){return i(!n)}},a.a.createElement("div",{className:"subtitle",style:{float:"left",margin:0}},"Controls"),a.a.createElement("div",{style:{float:"right"}},a.a.createElement(f.b.div,{animate:{display:"inline-block",transform:n?"rotate(180deg)":"rotate(0deg)"}},a.a.createElement(K.a,null))),a.a.createElement("div",{style:{background:"black",width:"100%",opacity:0}},"_")),a.a.createElement(f.b.div,{className:"menu",transition:{type:"spring",stiffness:50},animate:{display:"block",padding:5,maxHeight:n&&u?u.clientHeight+10:0,overflow:"hidden",clear:"both",marginBottom:n?20:0}},a.a.createElement(f.b.div,{ref:l},a.a.createElement(fe,null),a.a.createElement(Ae,null),a.a.createElement(ee,null),a.a.createElement(ne,null))),a.a.createElement(ye,null))},Ne=function(){return a.a.createElement(u.a,{store:v.default},a.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative",display:"flex",justifyContent:"flex-end"}},a.a.createElement("div",{style:{position:"absolute",margin:"20px"}},a.a.createElement(Se,null)),a.a.createElement(z,null)))},Te=function(){return a.a.createElement("div",{style:{overflow:"hidden",width:"100vw",height:"100vh"}},a.a.createElement(o,null),a.a.createElement(Ne,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(Te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},12:function(e,t,n){"use strict";var r=n(11),a=n(5),i=n(3),c=function(e){return!!e},o=n(21);n.d(t,"h",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"j",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"i",(function(){return b})),n.d(t,"d",(function(){return p})),n.d(t,"k",(function(){return g})),n.d(t,"e",(function(){return O}));var u=function e(t,n,r){var a=t[r];if(n(a,r))return r;switch(a.type){case"ABSTRACTION":return a.child?e(t,n,a.child):void 0;case"APPLICATION":return(a.left?e(t,n,a.left):void 0)||(a.right?e(t,n,a.right):void 0);default:return}},s=function(e,t,n){return l(e,(function(e,n,r){return Object(i.a)({},e,Object(a.a)({},r,t(n,r)))}),e,n)},l=function e(t,n,r,a){var i=t[a];if(!i)return r;var o=n(r,i,a);switch(i.type){case"VARIABLE":return o;case"ABSTRACTION":return i.child?e(t,n,o,i.child):o;case"APPLICATION":return[i.left,i.right].filter(c).reduce((function(r,a){return e(t,n,r,a)}),o);default:return r}},d=function(e,t,n){return l(e,(function(e,n,r){t(n,r)}),void 0,n)},f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{type:"VARIABLE",binder:t,name:e,primitives:n}},m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{type:"ABSTRACTION",variableName:e,child:t,primitives:n}},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{type:"APPLICATION",left:e,right:t,primitives:n}},b=function(e){var t=e.reduction;if(t)if("CONSUME"===t.type&&0===Object.keys(t.substitutions||{}).length)t.type="FADE";else{var n=o.a[o.a.indexOf(t.type)+1];e.reduction=n?Object(i.a)({},t,{type:n}):void 0}},v=function(e,t){return t[e]||{type:"NULL",children:[]}},p=function(e){switch(e.type){case"ABSTRACTION":return e.child?[e.child]:[];case"APPLICATION":return[e.left,e.right].filter(c);default:return[]}},g=function e(t,n){var a="object"===typeof t?t:v(t,n),i=p(a)[0]?v(p(a)[0],n):void 0;return i&&"APPLICATION"===i.type?[].concat(Object(r.a)(e(p(a)[0],n)),Object(r.a)(p(a).slice(1))):p(a)},O=function(e,t){var n="object"===typeof e?e:t.nodes[e];if(null===n||void 0===n?void 0:n.primitives.length)return t.primitives[n.primitives[n.primitives.length-1]]}},2:function(e,t,n){"use strict";n.d(t,"useDispatch",(function(){return b}));var r=n(22),a=n(33),i=n(30),c=n.n(i),o=n(35),u=n(38),s=n(21);n.d(t,"REDUCTION_STAGES",(function(){return s.a})),n.d(t,"addAbstraction",(function(){return s.b})),n.d(t,"addApplication",(function(){return s.c})),n.d(t,"addVariable",(function(){return s.d})),n.d(t,"clearTree",(function(){return s.e})),n.d(t,"createPrimitive",(function(){return s.f})),n.d(t,"destructurePrimitive",(function(){return s.g})),n.d(t,"directChildren",(function(){return s.h})),n.d(t,"nextReductionStage",(function(){return s.j})),n.d(t,"queueReduction",(function(){return s.k})),n.d(t,"reduceTree",(function(){return s.l})),n.d(t,"resetRoot",(function(){return s.m})),n.d(t,"searchTree",(function(){return s.n})),n.d(t,"setOriginalRoot",(function(){return s.o})),n.d(t,"setReducer",(function(){return s.p})),n.d(t,"setRoot",(function(){return s.q})),n.d(t,"visibleChildren",(function(){return s.r}));var l=n(51);n.d(t,"setAnimationSetting",(function(){return l.a})),n.d(t,"setHighlighted",(function(){return l.b})),n.d(t,"setMode",(function(){return l.c})),n.d(t,"setSelected",(function(){return l.d})),n.d(t,"updateDimensions",(function(){return l.e}));var d=n(58);n.d(t,"useAnimationSettings",(function(){return d.a})),n.d(t,"useConstants",(function(){return d.b})),n.d(t,"useCoord",(function(){return d.c})),n.d(t,"useCoords",(function(){return d.d})),n.d(t,"useDimensions",(function(){return d.e})),n.d(t,"useHighlighted",(function(){return d.f})),n.d(t,"useMode",(function(){return d.g})),n.d(t,"useOriginalRoot",(function(){return d.h})),n.d(t,"usePrimitives",(function(){return d.i})),n.d(t,"useReducer",(function(){return d.j})),n.d(t,"useReduction",(function(){return d.k})),n.d(t,"useRoot",(function(){return d.l})),n.d(t,"useSelected",(function(){return d.m})),n.d(t,"useStyles",(function(){return d.n})),n.d(t,"useTextTree",(function(){return d.o})),n.d(t,"useTree",(function(){return d.p})),n.d(t,"useTreeState",(function(){return d.q}));var f=n(52);n.o(f,"coordsSelector")&&n.d(t,"coordsSelector",(function(){return f.coordsSelector})),n.o(f,"joinsSelector")&&n.d(t,"joinsSelector",(function(){return f.joinsSelector})),n.o(f,"stylesSelector")&&n.d(t,"stylesSelector",(function(){return f.stylesSelector}));var m,h=Object(r.a)({reducer:{tree:c()(o.f.reducer,{filter:(m=["setRoot","queueReduction","nextReductionStage"],Object(i.includeAction)(m.map((function(e){return"tree/".concat(e)})))),groupBy:function(e,t,n){var r=t.reduction||n.present.reduction;if(r&&0===Object.keys(r.substitutions).length)switch(r.type){case"FADE":case"REMOVE":return"NO_EFFECT"}return null}}),visual:u.a.reducer}});t.default=h;var b=a.b},21:function(e,t,n){"use strict";var r=n(36);n.d(t,"a",(function(){return r.a}));var a=n(35);n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return a.b})),n.d(t,"d",(function(){return a.c})),n.d(t,"e",(function(){return a.d})),n.d(t,"f",(function(){return a.e})),n.d(t,"g",(function(){return a.g})),n.d(t,"j",(function(){return a.h})),n.d(t,"k",(function(){return a.i})),n.d(t,"m",(function(){return a.j})),n.d(t,"o",(function(){return a.k})),n.d(t,"p",(function(){return a.l})),n.d(t,"q",(function(){return a.m}));var i=n(12);n.d(t,"h",(function(){return i.d})),n.d(t,"i",(function(){return i.e})),n.d(t,"l",(function(){return i.g})),n.d(t,"n",(function(){return i.h})),n.d(t,"r",(function(){return i.k}))},35:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"m",(function(){return m})),n.d(t,"k",(function(){return h})),n.d(t,"j",(function(){return b})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"i",(function(){return O})),n.d(t,"h",(function(){return j})),n.d(t,"l",(function(){return E})),n.d(t,"e",(function(){return y})),n.d(t,"g",(function(){return A}));var r=n(11),a=n(3),i=n(22),c=n(4),o=n.n(c),u=n(36),s=n(12),l=Object(i.b)({name:"tree",initialState:u.b,reducers:{clearTree:function(e){return{root:"",originalRoot:"",nodes:{},primitives:{},constants:e.constants}},setRoot:function(e,t){e.root=t.payload},setOriginalRoot:function(e,t){e.originalRoot=t.payload,e.root=t.payload},resetRoot:function(e){e.root=e.originalRoot},addVariable:function(e,t){var n=t.payload,r=n.nodeID,a=n.binder,i=n.name,c=Object(s.c)(i,a);e.nodes[r]=c},addAbstraction:function(e,t){var n=t.payload,r=n.nodeID,a=n.variableName,i=n.child,c=Object(s.a)(a,i);e.nodes[r]=c},addApplication:function(e,t){var n=t.payload,r=n.nodeID,a=n.left,i=n.right,c=Object(s.b)(a,i);e.nodes[r]=c},queueReduction:function(e,t){var n=t.payload;n&&(S(e,n),N(e,n),I(n,e),e.reduction=n)},nextReductionStage:function(e){e.reduction&&(Object(s.i)(e),e.reduction&&("SUBSTITUTE"===e.reduction.type?C(e.reduction,e):"REMOVE"===e.reduction.type&&x(e)))},setConstant:function(e,t){var n=t.payload,r=n.name,a=n.text;e.constants[r]=a},setReducer:function(e,t){e.reducer=t.payload},createPrimitive:function(e,t){var n=t.payload,r=n.name,a=n.primID,i=n.rootID;T(e,a,i,r)},destructurePrimitive:function(e,t){R(e,t.payload)}}});t.f=l;var d=l.actions,f=d.clearTree,m=d.setRoot,h=d.setOriginalRoot,b=d.resetRoot,v=d.addVariable,p=d.addAbstraction,g=d.addApplication,O=d.queueReduction,j=d.nextReductionStage,E=(d.setConstant,d.setReducer),y=d.createPrimitive,A=d.destructurePrimitive,S=function(e,t){return o.a.uniq(o.a.keys(t.substitutions).flatMap((function(t){return e.nodes[t].primitives}))).forEach((function(t){return R(e,t)}))},N=function(e,t){o.a.forEach(t.substitutions,(function(t){return o.a.forEach(t.primitives,(function(n,r){var a=e.primitives[r];T(e,n,t.nodes[a.rootID],a.name)}))}))},T=function(e,t,n,i){e.primitives[t]={name:i,rootID:n},e.nodes=Object(a.a)({},e.nodes,{},Object(s.f)(e.nodes,(function(e){return Object(a.a)({},e,{primitives:[].concat(Object(r.a)(e.primitives),[t])})}),n))},R=function(e,t){var n=e.primitives[t];n&&(delete e.primitives[t],Object(s.j)(e.nodes,(function(e){o.a.remove(e.primitives,(function(e){return e===t}))}),n.rootID))},x=function(e){var t=e.reduction;if(t){var n=Object(s.d)(e.nodes[t.abs])[0],a=e.root===t.parentApplication,i=t.visibleParent===t.parentApplication?e.root:t.visibleParent;w(t.parentApplication,n,i,e.nodes),[].concat(Object(r.a)(o.a.keys(t.substitutions)),[t.abs,t.consumed]).forEach((function(t){return o.a.unset(e.nodes,t)})),a&&(e.originalRoot===e.root&&(e.originalRoot=n),e.root=n)}},I=function(e,t){var n=t.nodes;o.a.forEach(e.substitutions,(function(t){var r=function(e){return t.nodes[e]||e},a=function(e){return t.primitives[e]||e};Object(s.j)(n,(function(e,t){var i=r(t);switch(e.type){case"VARIABLE":n[i]=Object(s.c)(e.name,e.binder&&r(e.binder),e.primitives.map(a));break;case"ABSTRACTION":n[i]=Object(s.a)(e.variableName,e.child?r(e.child):e.child,e.primitives.map(a));break;case"APPLICATION":var c=e.left?r(e.left):e.left,o=e.right?r(e.right):e.right;n[i]=Object(s.b)(c,o,e.primitives.map(a))}}),e.consumed)}))},C=function(e,t){o.a.forEach(e.substitutions||{},(function(n,r){return w(r,n.nodes[e.consumed]||e.consumed,t.root,t.nodes)}))},w=function(e,t,n,r){Object(s.j)(r,(function(n,a){switch(n.type){case"ABSTRACTION":n.child===e&&(r[a]=Object(s.a)(n.variableName,t));break;case"APPLICATION":r[a]=n.left===e?Object(s.b)(t,n.right):n.right===e?Object(s.b)(n.left,t):n}}),n)}},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=["SELECT","CONSUME","LIFT","HOVER","UNBIND","SUBSTITUTE","FADE","REMOVE"],a={nodes:{},root:"",originalRoot:"",primitives:{},constants:{RECURSE:"\u03bb f. (\u03bb x. f (x x)) (\u03bb x. f (x x))",PLUS:"\u03bb a b f x.a f (b f x)",MULT:"\u03bb a b f.a (b f)",SUCC:"\u03bb b f x.f (b f x)",POW:"\u03bb b e.e b",PRED:"\u03bb b f x.b (\u03bb c d.d (c f)) (\u03bb e.x) (\u03bb e.e)",SUb:"\u03bb a b.b PRED a",TRUE:"\u03bb x y.x",FALSE:"\u03bb x y.y",AND:"\u03bb p q.p q p",OR:"\u03bb p q.p p q",NOT:"\u03bb p.p FALSE TRUE",IFTHENELSE:"\u03bb p a b.p a b",ISZERO:"\u03bb b.b (\u03bb x.FALSE) TRUE",LEQ:"\u03bb a b.ISZERO (SUB a b)"}}},38:function(e,t,n){"use strict";n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return f}));var r=n(3),a=n(22),i=n(39),c=Object(a.b)({name:"visual",initialState:i.a,reducers:{setSelected:function(e,t){e.selected=t.payload},setHighlighted:function(e,t){e.highlighted=t.payload},setDimension:function(e,t){var n=t.payload,r=n.dimension,a=n.value;e.dimensions[r]=a},setMode:function(e,t){e.animation.mode=t.payload},setAnimationSetting:function(e,t){var n=t.payload,r=n.setting,a=n.value;e.animation.settings[r]=a},setAnimationEnabled:function(e,t){e.animation.enabled=t.payload},updateDimensions:function(e,t){e.dimensions=Object(r.a)({},e.dimensions,{},t.payload)}}});t.a=c;var o=c.actions,u=o.setSelected,s=o.setHighlighted,l=(o.setDimension,o.setMode),d=o.setAnimationSetting,f=(o.setAnimationEnabled,o.updateDimensions)},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={selected:[],highlighted:[],theme:{text:"rgba(248, 248, 248,1)",highlightedStroke:"rgba(62, 61, 50, 1)",selectedStroke:"rgba(62, 61, 50, 1)",stroke:"rgba(139, 139, 139, 1)",transparent:"rgba(0, 0, 0, 0)",unbinded:"rgba(0, 0, 0, 1)"},dimensions:{circleRadius:32,heightMargin:40,strokeWidth:4,widthMargin:50},animation:{settings:{type:"tween",duration:.5},enabled:!0,mode:"STOP"}}},51:function(e,t,n){"use strict";n(39);var r=n(38);n.d(t,"a",(function(){return r.b})),n.d(t,"b",(function(){return r.c})),n.d(t,"c",(function(){return r.d})),n.d(t,"d",(function(){return r.e})),n.d(t,"e",(function(){return r.f}))},52:function(e,t,n){"use strict";var r=n(53);n.o(r,"coordsSelector")&&n.d(t,"coordsSelector",(function(){return r.coordsSelector})),n.o(r,"joinsSelector")&&n.d(t,"joinsSelector",(function(){return r.joinsSelector})),n.o(r,"stylesSelector")&&n.d(t,"stylesSelector",(function(){return r.stylesSelector}));var a=n(55);n.d(t,"stylesSelector",(function(){return a.a}));var i=n(56);n.d(t,"joinsSelector",(function(){return i.a}))},53:function(e,t,n){"use strict";n.d(t,"coordsSelector",(function(){return d}));var r=n(5),a=n(3),i=n(31),c=n(2),o=n(4),u=n.n(o),s=n(62),l=n(54);n.o(l,"joinsSelector")&&n.d(t,"joinsSelector",(function(){return l.joinsSelector})),n.o(l,"stylesSelector")&&n.d(t,"stylesSelector",(function(){return l.stylesSelector}));var d=Object(i.a)((function(e){return e.tree.present}),(function(e){return e.visual.dimensions}),(function(e){return Object(c.joinsSelector)(e)}),(function(e,t,n){var r=e.root;if(r){var a=Object(s.a)(e,t,n),i=m(t,n,e),c=h(r,a,e.nodes,t,i),o=e.reduction?f(c,e,e.reduction,t):c;return"APPLICATION"===e.nodes[r].type&&delete o[r],o}return{}})),f=function(e,t,n,i){var o=u.a.reduce(n.substitutions,(function(e,t,c){return u.a.reduce(t.nodes,(function(e,t,o){if(e[o]){var u=2*i.heightMargin+4*i.circleRadius;switch(n.type){case"SELECT":case"CONSUME":return Object(a.a)({},e,Object(r.a)({},t,Object(a.a)({},e[o],{nodeID:t})));case"LIFT":return Object(a.a)({},e,Object(r.a)({},t,Object(a.a)({},e[o],{y:e[o].y-u,nodeID:t})));case"HOVER":case"UNBIND":return Object(a.a)({},e,Object(r.a)({},t,Object(a.a)({},e[o],{y:e[o].y-u,x:e[c].x-(e[n.consumed].x-e[o].x),nodeID:t})));default:return e}}return e}),e)}),e);if(t.nodes[n.abs]){var s=Object(c.directChildren)(t.nodes[n.abs])[0],l=s?t.nodes[s]:void 0;if(l&&"APPLICATION"===l.type&&e[n.parentApplication])return Object(a.a)(Object(r.a)({},s,Object(a.a)({},e[n.abs],{nodeID:s})),o)}return Object(a.a)({},o)},m=function(e,t,n){var i,o="APPLICATION"===(null===(i=n.nodes[n.root])||void 0===i?void 0:i.type)?Object(r.a)({},n.root,{x:-(e.widthMargin+e.circleRadius)}):{},s=u.a.reduce(t,(function(t,n,i){return Object(a.a)({},t,{},"ABSTRACTION"===n.type?Object(r.a)({},i,{x:-(e.circleRadius+e.widthMargin)}):{})}),{});if(!n.reduction||"SELECT"===n.reduction.type)return u.a.mergeWith({},s,o,b);var l=function(t){var i=e.widthMargin+e.circleRadius,o=Object(c.visibleChildren)(t.visibleParent,n.nodes)[2];return Object(a.a)(Object(r.a)({},t.consumed,{x:-i}),o?Object(r.a)({},o,{x:i}):{})}(n.reduction);return u.a.mergeWith({},s,l,o,b)},h=function e(t,n,i,o,u){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,d=i[t];if(d){var f=b(Object(a.a)({nodeID:t,type:d.type},n[t],{x:s,y:l}),u[t]);return d.primitives.length?Object(r.a)({},t,f):Object(c.visibleChildren)(d,i).reduce((function(t,r){var c=e(r,n,i,o,u,t.baseX,l);return c[r]?{baseX:c[r].x+c[r].w+o.widthMargin,coords:Object(a.a)({},t.coords,{},c)}:t}),{baseX:f.x+o.widthMargin+o.circleRadius,coords:Object(r.a)({},t,f)}).coords}return{}},b=function(e,t){return e?t?Object(a.a)({},e||{},{x:(e.x||0)+(t.x||0),y:(e.y||0)+(t.y||0)}):e:t}},54:function(e,t){},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n(5),a=n(3),i=n(31),c=n(21),o=n(4),u=n.n(o),s=n(63),l=n.n(s),d=function(e,t,n){return u.a.reduce(e.substitutions,(function(e,i,c){var o=v(c,n,t);return o?Object(a.a)({},e,Object(r.a)({},c,o)):e}),{})},f=function(e,t,n){return u.a.reduce(e.substitutions,(function(i,c){var o=c.nodes[e.consumed];if(n.tree.nodes[o]){var u=v(o,n,t);return u?Object(a.a)({},i,Object(r.a)({},o,u)):i}return i}),{})},m=function(e,t,n){return Object(c.l)(n.tree.nodes,(function(e,i,c){var o=v(c,n,t);return o?Object(a.a)({},e,Object(r.a)({},c,o)):e}),{},e.consumed)},h=function(e,t,n){if(n.tree.nodes[e.consumed]){var a=v(e.consumed,n,t);return a?Object(r.a)({},e.consumed,a):{}}return{}},b=function(e,t,n){var i=v(e.abs,n,t),c=v(e.parentApplication,n,t);return Object(a.a)({},i?Object(r.a)({},e.abs,i):{},{},c?Object(r.a)({},e.parentApplication,c):{})},v=function(e,t,n){var r,i=t.copies[e]||e,c=t.tree.nodes[i],o="VARIABLE"===(null===c||void 0===c?void 0:c.type)&&c.binder||i,u=t.highlighted.includes(i)||t.highlighted.includes(o),s=t.selected.includes(i)||t.selected.includes(o);if(null===c||void 0===c||null===(r=c.primitives)||void 0===r?void 0:r.length)return j(c.primitives[c.primitives.length-1],t,Object(a.a)({highlighted:u,selected:s},n));switch(null===c||void 0===c?void 0:c.type){case"VARIABLE":return p(i,t,Object(a.a)({highlighted:u,selected:s},n));case"ABSTRACTION":return g(i,t,Object(a.a)({highlighted:u,selected:s},n));case"APPLICATION":return O(i,t,Object(a.a)({highlighted:u,selected:s},n));default:return}},p=function(e,t,n){var r=n.transparent,a=n.selected,i=n.highlighted,c=t.tree.nodes[e],o=t.theme,u="VARIABLE"===(null===c||void 0===c?void 0:c.type)&&c.binder||e,s=r?o.transparent:t.colors[u]||o.stroke;return{type:"VAR_STYLE",fill:s,animation:t.animation,stroke:{stroke:r?o.transparent:c&&"VARIABLE"!==c.type?s:a?o.selectedStroke:i?o.highlightedStroke:c?o.transparent:s,strokeWidth:t.dimensions.strokeWidth}}},g=function(e,t,n){var r=n.transparent,a=n.selected,i=n.highlighted,c=t.theme;return{type:"ABS_STYLE",fill:c.transparent,animation:t.animation,stroke:{stroke:r?c.transparent:a?c.selectedStroke:i?c.highlightedStroke:c.stroke,strokeWidth:t.dimensions.strokeWidth,strokeLinecap:"square"},input:p(e,t,{transparent:r,selected:a,highlighted:i}),output:p("",t,{transparent:r,selected:a,highlighted:i})}},O=function(e,t,n){var r=n.transparent,a=n.selected,i=n.highlighted,c=t.theme;return{type:"APPL_STYLE",fill:c.transparent,animation:t.animation,stroke:{stroke:r?c.transparent:a?t.theme.selectedStroke:i?t.theme.highlightedStroke:t.theme.stroke,strokeWidth:t.dimensions.strokeWidth},output:p("",t,{transparent:r,selected:a,highlighted:i})}},j=function(e,t,n){var r=n.transparent,a=n.selected,i=n.highlighted,c=t.theme;return{type:"PRIM_STYLE",fill:r?c.transparent:c.stroke,animation:t.animation,text:{fill:r?c.transparent:c.text},stroke:{stroke:r?c.transparent:a?t.theme.selectedStroke:i?t.theme.highlightedStroke:t.theme.stroke,strokeWidth:t.dimensions.strokeWidth}}},E=Object(i.a)((function(e){return{tree:e.tree.present,colors:S(e),copies:e.tree.present.reduction?y(e.tree.present.reduction,e.tree.present.nodes):{},theme:e.visual.theme,dimensions:e.visual.dimensions,animation:e.visual.animation.settings,selected:e.visual.selected,highlighted:e.visual.highlighted}}),(function(e){var t=e.tree.nodes,n=e.tree.reduction,r=u.a.pickBy(u.a.mapValues(t,(function(t,n){return v(n,e,{})})),(function(e){return u.a.isObject(e)}));if(!n)return r;switch(n.type){case"SELECT":return Object(a.a)({},r,{},f(n,{transparent:!0},e),{},h(n,{highlighted:!0},e),{},d(n,{highlighted:!0},e));case"UNBIND":return Object(a.a)({},r,{},f(n,{highlighted:!0},e),{},h(n,{highlighted:!0},e),{},d(n,{transparent:!0},e));case"FADE":return Object(a.a)({},r,{},f(n,{highlighted:!0},e),{},m(n,{transparent:!0},e),{},b(n,{transparent:!0},e),{},h(n,{transparent:!0},e));default:return Object(a.a)({},r,{},f(n,{highlighted:!0},e),{},h(n,{highlighted:!0},e),{},d(n,{highlighted:!0},e))}})),y=function(e,t){var n=function(){return u.a.reduce(e.substitutions,(function(e,t){return Object(a.a)({},e,{},u.a.reduce(t.nodes,(function(e,t,n){return Object(a.a)({},e,Object(r.a)({},t,n))}),{}))}),{})};switch(e.type){case"FADE":return Object(a.a)({},n(),{},function(){var n=Object(c.h)(t[e.abs])[0],a=n?t[n]:void 0;return a&&"APPLICATION"===a.type?Object(r.a)({},n,e.parentApplication):{}}());case"REMOVE":return{};default:return n()}},A=function(e,t,n){switch(t.type){case"ABSTRACTION":return function(e){return l()({seed:e,luminosity:"bright"})}(e);case"VARIABLE":return n.unbinded;default:return"transparent"}},S=Object(i.a)((function(e){return e.tree.present}),(function(e){return e.visual.theme}),(function(e,t){return u.a.mapValues(e.nodes,(function(e,n){return A(n,e,t)}))}))},56:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),a=n(3),i=n(2),c=n(31),o=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=t[u],l=t[n];if(!l)return o;if(!s||"ABSTRACTION"!==s.type||"ABSTRACTION"!==l.type)return Object(i.directChildren)(l).reduce((function(r,a){return e(t,a,c,r,n)}),o);var d=o[u];if(c){var f=c.abs,m=c.child;if(f===u&&m!==n)return o}var h=Object(a.a)({},o,Object(r.a)({},n,{jointTo:d?d.jointTo:u,distance:d?d.distance+1:1,type:l.type}));return e(t,l.child,c,h,n)},u=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",u=t[o],s=t[n];if(!s)return c;if(!u||"APPLICATION"!==u.type||"APPLICATION"!==s.type)return Object(i.directChildren)(s).reduce((function(r,a){return e(t,a,r,n)}),c);var l=c[o],d=Object(a.a)({},c,Object(r.a)({},n,{jointTo:l?l.jointTo:o,distance:l?l.distance+1:1,type:s.type}));return Object(a.a)({},e(t,s.left,d),{},e(t,s.right,d,n))},s=Object(c.a)((function(e){return e.tree.present}),(function(e){return Object(a.a)({},o(e.nodes,e.root,e.reduction),{},u(e.nodes,e.root))}))},57:function(e,t){},58:function(e,t,n){"use strict";var r=n(11),a=n(5),i=n(3),c=n(31),o=n(2),u=n(4),s=n.n(u),l=Object(c.a)((function(e){return e.tree.present.nodes}),(function(e){return Object(o.joinsSelector)(e)}),(function(e,t){return function(n){return function e(t,n,c){var u=s.a.reduce(c,(function(e,t,n){var r=e[t.jointTo];return r&&c[r].distance>t.distance?e:Object(i.a)({},e,Object(a.a)({},t.jointTo,n))}),{}),l=t[n];switch(null===l||void 0===l?void 0:l.type){case"VARIABLE":return l.name;case"ABSTRACTION":var d=u[n]||(c[n]?u[c[n].jointTo]:""),f=t[d]?Object(o.visibleChildren)(t[d],t):Object(o.visibleChildren)(l,t),m=function e(t,n,a){if(!a)return[];var i=t[a||""];switch(i.type){case"ABSTRACTION":return[i.variableName].concat(Object(r.a)(a===n?[]:e(t,n,i.child)));default:return[]}}(t,d,n);return"(\u03bb ".concat(m.join(" "),". ").concat(f.map((function(n){return e(t,n,c)})).join(" "),")");case"APPLICATION":return"(".concat(Object(o.visibleChildren)(l,t).map((function(n){return e(t,n,c)})).join(" "),")");default:return""}}(e,n,t)}})),d=n(33);n.d(t,"q",(function(){return m})),n.d(t,"p",(function(){return h})),n.d(t,"l",(function(){return b})),n.d(t,"h",(function(){return v})),n.d(t,"k",(function(){return p})),n.d(t,"j",(function(){return g})),n.d(t,"i",(function(){return O})),n.d(t,"b",(function(){return j})),n.d(t,"e",(function(){return E})),n.d(t,"n",(function(){return y})),n.d(t,"d",(function(){return A})),n.d(t,"o",(function(){return S})),n.d(t,"f",(function(){return N})),n.d(t,"m",(function(){return T})),n.d(t,"g",(function(){return R})),n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return I}));var f=d.c,m=function(){return f((function(e){return e.tree.present}))},h=function(){return f((function(e){return e.tree.present.nodes}))},b=function(){return f((function(e){return e.tree.present.root}))},v=function(){return f((function(e){return e.tree.present.originalRoot}))},p=function(){return f((function(e){return e.tree.present.reduction}))},g=function(){return f((function(e){return e.tree.present.reducer}))},O=function(){return f((function(e){return e.tree.present.primitives}))},j=function(){return f((function(e){return e.tree.present.constants}))},E=function(){return f((function(e){return e.visual.dimensions}))},y=function(){return f((function(e){return Object(o.stylesSelector)(e)}))},A=function(){return f((function(e){return Object(o.coordsSelector)(e)}))},S=function(e){return f((function(t){return l(t)(e||t.tree.present.root)}))},N=function(){return f((function(e){return e.visual.highlighted}))},T=function(){return f((function(e){return e.visual.selected}))},R=function(){return f((function(e){return e.visual.animation.mode}))},x=function(){return f((function(e){return e.visual.animation.settings}))},I=function(e){return A()[e]}},62:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),a=n(3),i=n(2),c=n(21),o=n(4),u=n.n(o),s=function(e,t,n){var r=l(t,n,e);return d(e.root,e,t,r)},l=function(e,t,n){return function(){var i=u.a.reduce(t,(function(e,t){var n=e[t.jointTo]||0;return Object(a.a)({},e,Object(r.a)({},t.jointTo,Math.max(n,t.distance)))}),{});return u.a.reduce(t,(function(t,c,o){if(n.nodes[c.jointTo].primitives.length)return t;switch(c.type){case"ABSTRACTION":return Object(a.a)({},t,Object(r.a)({},c.jointTo,{w:-(e.circleRadius+e.widthMargin)}),i[c.jointTo]>c.distance?Object(r.a)({},o,{w:-(e.circleRadius+e.widthMargin)}):{});default:return Object(a.a)({},t,Object(r.a)({},c.jointTo,{w:-e.widthMargin}),i[c.jointTo]>c.distance?Object(r.a)({},o,{w:-e.widthMargin}):{})}}),{})}()},d=function e(t,n,c,o){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=n.nodes[t];if(s){var l=Object(i.visibleChildren)(t,n.nodes),d=s.primitives.length?u:l.map((function(t){return e(t,n,c,o,u)})).reduce((function(e,t){return Object(a.a)({},e,{},t)}),{});return Object(a.a)({},d,Object(r.a)({},t,h({h:m(s,d,c,n),w:f(s,d,c,n)},o[t])))}return u},f=function(e,t,n,r){var a=function(){return Object(i.visibleChildren)(e,r.nodes).map((function(e){return r.nodes[e]?t[e].w:-n.widthMargin})).reduce((function(e,t){return e+t+n.widthMargin}),0)},o=Object(c.i)(e,r);if(o)return 2*n.circleRadius+2*n.widthMargin+n.circleRadius*o.name.length;switch(e.type){case"VARIABLE":return 2*n.circleRadius;case"ABSTRACTION":return a()+2*n.circleRadius+n.widthMargin;case"APPLICATION":return a()+n.circleRadius+n.widthMargin;default:return 0}},m=function(e,t,n,r){switch(e.type){case"VARIABLE":return 2*n.circleRadius;case"ABSTRACTION":case"APPLICATION":return 2*n.circleRadius+2*n.heightMargin;default:return 0}},h=function(e,t){return t?{w:(e.w||0)+(t.w||0),h:(e.h||0)+(t.h||0)}:e}},64:function(e,t,n){"use strict";var r=n(3),a=n(65),i=n(2),c=n(18),o=n(0),u=n.n(o),s=n(66),l=n(67),d=n(68);n(57);t.default=function(e){var t=Object(i.useStyles)(),n=Object(i.useTree)(),r=Object(i.useDimensions)(),o=Object(i.usePrimitives)(),m=Object(i.useCoords)(),h=e.orderedKeys.flatMap((function(i){var c=m[i],u=n[i];if(u.primitives.length){var f=o[u.primitives[u.primitives.length-1]];return Object(a.a)(i,e.events,t[i],c,r,f)}switch(u.type){case"VARIABLE":return Object(d.a)(i,e.events,t[i],c);case"ABSTRACTION":return Object(s.a)(i,e.events,t[i],c,r);case"APPLICATION":return Object(l.a)(i,e.events,t[i],c,r);default:return[]}}));return u.a.createElement(c.b.g,null,u.a.createElement(c.a,{initial:!1},h.map((function(t){return u.a.createElement(f,Object.assign({key:t.key,name:t.key},t,{onRest:e.onRest,onStart:e.onStart}))}))))};var f=function(e){"Test"===e.name&&console.log("here");var t=Object(i.useAnimationSettings)(),n=e.onRest,a=e.onStart,o=Object(r.a)({},e.static,{onAnimationStart:function(){return a&&a(e.name)},onAnimationComplete:function(){return n&&n(e.name)},exit:{stroke:"rgba(0, 0, 0, 0)",fill:"rgba(0, 0, 0, 0)",transition:{type:"tween",duration:.1}},transition:t,initial:Object(r.a)({},e.animated,{stroke:"rgba(0, 0, 0, 0)",fill:"rgba(0, 0, 0, 0)"}),animate:Object(r.a)({},e.animated)});switch(e.type){case"TEXT":return u.a.createElement(c.b.text,o,e.text);default:return u.a.createElement(c.b.path,o)}}},65:function(e,t,n){"use strict";var r=n(3),a=n(4),i=n.n(a);t.a=function(e,t,n,r,a,i){return n&&r&&i&&"PRIM_STYLE"===n.type?c({id:e,events:t,height:r.h,heightMargin:a.heightMargin,radius:a.circleRadius,style:n,width:r.w,widthMargin:a.widthMargin,name:i.name,x:r.x,y:r.y}):[]};var c=function(e){var t=e.width-e.radius,n=e.y-e.radius,a=e.height/2-e.radius-1,c="M".concat(e.x+e.radius,",").concat(n,"\n        a1,1 0 0,0 0,").concat(2*e.radius,"\n        l").concat(e.heightMargin,",").concat(a+1,"\n        l").concat(t-2*e.heightMargin,",0\n        l").concat(e.heightMargin,",").concat(-a,"\n        l0,").concat(-1,"\n        a1,1 0 1,1 0,").concat(2*-e.radius,"\n        l0,").concat(-1,"\n        l").concat(-e.heightMargin,",").concat(-a,"\n        l").concat(2*e.heightMargin-t,",0\n        l").concat(-e.heightMargin,",").concat(a+1,"\n        l").concat(-1,",0"),o=1.5*e.radius,u=i.a.mapValues(e.events,(function(t){return function(n){n.stopPropagation(),t(e.id)}}));return[{type:"PATH",key:"".concat(e.id,"_prim"),animated:Object(r.a)({d:c,fill:e.style.fill},e.style.stroke),static:u},{type:"TEXT",key:"".concat(e.id,"_text"),text:e.name,animated:Object(r.a)({x:e.x+e.width/2,y:e.y,fontSize:o},e.style.text),static:Object(r.a)({},u,{textAnchor:"middle",dominantBaseline:"middle"})}]}},66:function(e,t,n){"use strict";var r=n(3),a=n(4),i=n.n(a);t.a=function(e,t,n,r,a){return n&&r&&"ABS_STYLE"===n.type?c({id:e,height:r.h,heightMargin:a.heightMargin,radius:a.circleRadius,style:n,events:t,width:r.w,widthMargin:a.widthMargin,x:r.x,y:r.y}):[]};var c=function(e){var t=e.width-e.radius,n=e.y-e.radius,a=e.x+t+e.radius,c="M".concat(e.x+e.radius,",").concat(n,"\n        a1,1 0 0,0 0,").concat(2*e.radius),o="M".concat(a,",").concat(n,"\n        a1,1 0 0,0 0,").concat(2*e.radius,"\n        l0,").concat(2*-e.radius),u=e.height/2-e.radius-1,s="M".concat(e.x+e.radius,",").concat(n+2*e.radius,"\n        l0,").concat(1,"\n        l").concat(e.heightMargin,",").concat(u,"\n        l").concat(t-2*e.heightMargin,",0\n        l").concat(e.heightMargin,",").concat(-u,"\n        l0,").concat(-1,"\n        a1,1 0 1,1 0,").concat(2*-e.radius,"\n        l0,").concat(-1,"\n        l").concat(-e.heightMargin,",").concat(-u,"\n        l").concat(2*e.heightMargin-t,",0\n        l").concat(-e.heightMargin,",").concat(u,"\n        l0,").concat(1+2*e.radius),l=i.a.mapValues(e.events,(function(t){return function(n){n.stopPropagation(),t(e.id)}}));return[{type:"PATH",key:"".concat(e.id,"_output"),animated:Object(r.a)({d:c,fill:e.style.output.fill},e.style.output.stroke),static:l},{type:"PATH",key:"".concat(e.id,"_input"),animated:Object(r.a)({d:o,fill:e.style.input.fill},e.style.input.stroke),static:l},{type:"PATH",key:"".concat(e.id,"_box"),animated:Object(r.a)({d:s,fill:e.style.fill},e.style.stroke),static:Object(r.a)({},l,{pointerEvents:"stroke"})}]}},67:function(e,t,n){"use strict";var r=n(3),a=n(4),i=n.n(a);t.a=function(e,t,n,r,a){return n&&r&&"APPL_STYLE"===n.type?c({id:e,height:r.h,heightMargin:a.heightMargin,radius:a.circleRadius,style:n,events:t,width:r.w,x:r.x,y:r.y}):[]};var c=function(e){var t=e.width-e.radius,n=e.height/2-e.radius-1,a="M".concat(e.x+e.radius,",").concat(e.y-e.radius,"\n        a1,1 0 0,0 0,").concat(2*e.radius),c="M".concat(e.x+e.radius,",").concat(e.y+e.radius,"\n        l0,").concat(1,"\n        l").concat(e.heightMargin,",").concat(n,"\n        l").concat(t-2*e.heightMargin,",0\n        l").concat(e.heightMargin,",").concat(-n,"\n        l0,").concat(-1,"\n        l0,").concat(2*-e.radius,"\n        l0,").concat(-1,"\n        l").concat(-e.heightMargin,",").concat(-n,"\n        l").concat(2*e.heightMargin-t,",0\n        l").concat(-e.heightMargin,",").concat(n,"\n        l0,").concat(1+2*e.radius),o=i.a.mapValues(e.events,(function(t){return function(n){n.stopPropagation(),t(e.id)}}));return[{type:"PATH",key:"".concat(e.id,"_output"),animated:Object(r.a)({d:a,fill:e.style.output.fill},e.style.output.stroke),static:o},{type:"PATH",key:"".concat(e.id,"_box"),animated:Object(r.a)({d:c,fill:e.style.fill},e.style.stroke),static:Object(r.a)({},o,{pointerEvents:"stroke"})}]}},68:function(e,t,n){"use strict";var r=n(3),a=n(4),i=n.n(a);t.a=function(e,t,n,r){return n&&r&&"VAR_STYLE"===n.type?c({id:e,radius:r.w/2,style:n,events:t,x:r.x,y:r.y}):[]};var c=function(e){var t="M".concat(e.x,",").concat(e.y,"\n      a").concat(e.radius,",").concat(e.radius," 0 1,0 ").concat(2*e.radius,",0\n      a").concat(e.radius,",").concat(e.radius," 0 1,0 -").concat(2*e.radius,",0");return[{type:"PATH",key:"".concat(e.id,"_var"),animated:Object(r.a)({d:t,fill:e.style.fill},e.style.stroke),static:i.a.mapValues(e.events,(function(t){return function(n){n.stopPropagation(),t(e.id)}}))}]}},80:function(e,t,n){e.exports=n(106)},87:function(e,t,n){},88:function(e,t,n){}},[[80,1,2]]]);
//# sourceMappingURL=main.640ec07d.chunk.js.map